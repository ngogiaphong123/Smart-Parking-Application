generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}
model User {
    accountId   String @id @default(auto()) @map("_id") @db.ObjectId
    email       String @unique
    password    String
    firstName   String
    lastName    String
    avatarUrl   String
    avatarFileName String
    role        String
    phone       String
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    vehicles   Vehicle[]
}
model TemperatureSensor {
    recordId    String @id @map("_id")
    unit        String
    timestamp   DateTime
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    temperature String
}
model LightSensor {
    recordId    String @id @map("_id")
    unit        String
    timestamp   DateTime
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    lux         String
}
model FanDevice {
    recordId    String @id @map("_id")
    timestamp   DateTime
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    status      String
}
model Vehicle {
    vehicleId   String @id @map("_id") @default(auto()) @db.ObjectId
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    user        User @relation(fields: [ownerId], references: [accountId])
    ownerId     String @db.ObjectId
    logs        Logs[]
    rfid        Rfid @relation(fields: [rfidNumber], references: [number])
    rfidNumber  String @unique
    genre      String
    numberPlate String
    model       String
}
model ParkingSlot {
    parkingSlotId   String @id @map("_id") @default(auto()) @db.ObjectId
    createdAt       DateTime @default(now())
    updatedAt       DateTime @updatedAt
    status          String // Incoming, Occupied, Not Occupied
    pricePerHour    String
    logs            Logs[]
}
model Logs {
    logId       String @id @map("_id") @default(auto()) @db.ObjectId
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    timeIn      DateTime
    timeOut     DateTime
    price       String 
    ParkingSlot  ParkingSlot @relation(fields: [parkingSlotId], references: [parkingSlotId])
    parkingSlotId String @db.ObjectId
    vehicle     Vehicle @relation(fields: [vehicleId], references: [vehicleId])
    vehicleId   String @db.ObjectId
}
model Rfid {
    number      String @id @map("_id")
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    vehicle     Vehicle?
}